    <!doctype html>
    <html lang="es">
    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Login - Calzado Artesanal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <style>body{font-family:var(--font-display, system-ui, -apple-system, 'Segoe UI', Roboto);} .avatar-sm{width:34px;height:34px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:#f1f1f1}</style>
    </head>
    <body class="bg-light">

    <header class="border-bottom bg-white">
    <div class="container d-flex align-items-center justify-content-between py-3">
        <div class="d-flex align-items-center gap-3">
        <div class="text-primary" style="width:40px;height:40px;display:flex;align-items:center;justify-content:center">
            <svg width="24" height="24" viewBox="0 0 48 48" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M24 4H6V17.3333V30.6667H24V44H42V30.6667V17.3333H24V4Z" fill-rule="evenodd"/></svg>
        </div>
        <h1 class="h6 mb-0 fw-bold">Calzado Artesanal</h1>
        </div>

        <div id="headerControls" class="d-flex align-items-center gap-2">
        <!-- Filled by JS -->
        </div>
    </div>
    </header>

    <main class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-md-8">
        <div class="card shadow-sm">
            <div class="card-body">
            <h3 class="mb-3">Entrar a tu cuenta</h3>
            <form id="loginForm">
                <div class="mb-3">
                <label class="form-label">Correo</label>
                <input id="loginEmail" class="form-control" type="email" required placeholder="tucorreo@ejemplo.com">
                </div>
                <div class="mb-3">
                <label class="form-label">Contraseña</label>
                <input id="loginPassword" class="form-control" type="password" required placeholder="Tu contraseña">
                </div>
                <div id="loginAlert" class="alert alert-danger d-none py-2"></div>
                <div class="d-flex gap-2">
                <button class="btn btn-primary" type="submit">Entrar</button>
                <a href="#register" id="openRegister" class="btn btn-outline-secondary">Crear cuenta</a>
                </div>
            </form>
            </div>
        </div>

        <div class="mt-4 text-center small text-muted">O entra con</div>
        <div class="d-flex gap-2 mt-2">
            <button class="btn btn-outline-secondary w-100">Google</button>
            <button class="btn btn-outline-secondary w-100">Facebook</button>
        </div>

        <hr class="my-4">

        <div class="card shadow-sm">
            <div class="card-body">
            <h4 class="mb-3">Crear cuenta</h4>
            <form id="registerForm">
                <div class="row g-3">
                <div class="col-12 col-md-6">
                    <input id="regName" class="form-control" placeholder="Nombre completo" required>
                </div>
                <div class="col-12 col-md-6">
                    <input id="regPhone" class="form-control" placeholder="Teléfono">
                </div>
                <div class="col-12 col-md-6">
                    <input id="regEmail" class="form-control" placeholder="Correo electrónico" type="email" required>
                </div>
                <div class="col-12 col-md-6">
                    <input id="regAddress" class="form-control" placeholder="Dirección">
                </div>
                <div class="col-12 col-md-4">
                    <input id="regCity" class="form-control" placeholder="Ciudad">
                </div>
                <div class="col-12 col-md-4">
                    <input id="regPostal" class="form-control" placeholder="Código postal">
                </div>
                <div class="col-12 col-md-4">
                    <input id="regCountry" class="form-control" placeholder="País">
                </div>
                <div class="col-12 col-md-6">
                    <input id="regPassword" class="form-control" placeholder="Contraseña" type="password" required>
                </div>
                <div class="col-12 col-md-6">
                    <input id="regPassword2" class="form-control" placeholder="Confirmar contraseña" type="password" required>
                </div>
                </div>
                <div id="registerAlert" class="alert alert-danger d-none mt-3 py-2"></div>
                <div class="form-check mt-3">
                <input id="termsCheck" class="form-check-input" type="checkbox">
                <label class="form-check-label">Acepto los términos</label>
                </div>
                <button class="btn btn-success mt-3" type="submit">Crear cuenta y entrar</button>
            </form>
            </div>
        </div>

        </div>
    </div>
    </main>

    <!-- Profile modal (mi perfil) -->
    <div class="modal fade" id="profileModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Mi perfil</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
            <div id="profileContent"></div>
            <div class="mt-3 d-flex justify-content-between">
            <button id="editProfileBtn" class="btn btn-outline-primary">Editar</button>
            <button id="logoutBtn" class="btn btn-danger">Cerrar sesión</button>
            </div>
        </div>
        </div>
    </div>
    </div>

    <footer class="bg-light py-4 mt-5">
    <div class="container text-center small text-muted">© 2024 Calzado Artesanal</div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Shared auth helpers (same logic used by catalog page)
    function getUsers(){ try{ return JSON.parse(localStorage.getItem('users')||'[]'); }catch{return [];} }
    function saveUsers(u){ localStorage.setItem('users', JSON.stringify(u)); }
    function getCurrentUser(){ try{ return JSON.parse(localStorage.getItem('user')||'null'); }catch{return null;} }
    function setCurrentUser(user){ if(!user) localStorage.removeItem('user'); else localStorage.setItem('user', JSON.stringify(user)); updateHeaderUI(); }

    // header UI
    function updateHeaderUI(){ const headerControls = document.getElementById('headerControls'); headerControls.innerHTML=''; const user = getCurrentUser(); if(user){ const container = document.createElement('div'); container.className='d-flex align-items-center gap-2'; const avatar=document.createElement('div'); avatar.className='avatar-sm'; avatar.textContent = (user.name||'U').slice(0,1).toUpperCase(); const nameEl=document.createElement('div'); nameEl.className='d-none d-sm-block'; nameEl.innerHTML=`<div class="small text-muted">Hola,</div><div class="fw-semibold">${user.name}</div>`; const profileBtn=document.createElement('button'); profileBtn.className='btn btn-outline-secondary btn-sm'; profileBtn.textContent='Perfil'; profileBtn.addEventListener('click', ()=>{ showProfile(); const pm = new bootstrap.Modal(document.getElementById('profileModal')); pm.show(); }); const cartBtn=document.createElement('button'); cartBtn.className='btn btn-outline-secondary btn-sm'; cartBtn.innerHTML = '<span class="material-symbols-outlined">shopping_bag</span>'; container.appendChild(avatar); container.appendChild(nameEl); container.appendChild(profileBtn); container.appendChild(cartBtn); headerControls.appendChild(container);} else{ const loginBtn=document.createElement('button'); loginBtn.className='btn btn-outline-primary'; loginBtn.textContent='Entrar / Registrarse'; loginBtn.addEventListener('click', ()=> window.location.href='login.html'); headerControls.appendChild(loginBtn);} }

    // initial
    updateHeaderUI();

    // Login form
    document.getElementById('loginForm').addEventListener('submit', function(e){ e.preventDefault(); const email = document.getElementById('loginEmail').value.trim().toLowerCase(); const password = document.getElementById('loginPassword').value; const users = getUsers(); const found = users.find(u => u.email===email && u.password===password); if(!found){ const a=document.getElementById('loginAlert'); a.textContent='Correo o contraseña incorrectos'; a.classList.remove('d-none'); return; } document.getElementById('loginAlert').classList.add('d-none'); setCurrentUser({ name: found.name, email: found.email, phone: found.phone || '', address: found.address || '' }); // redirect to catalog or previous
    const redirect = localStorage.getItem('postLoginRedirect') || 'catalogo-bootstrap-updated.html'; window.location.href = redirect; });

    // Register form
    document.getElementById('registerForm').addEventListener('submit', function(e){ e.preventDefault(); const name=document.getElementById('regName').value.trim(); const phone=document.getElementById('regPhone').value.trim(); const email=document.getElementById('regEmail').value.trim().toLowerCase(); const address=document.getElementById('regAddress').value.trim(); const city=document.getElementById('regCity').value.trim(); const postal=document.getElementById('regPostal').value.trim(); const country=document.getElementById('regCountry').value.trim(); const p1=document.getElementById('regPassword').value; const p2=document.getElementById('regPassword2').value; const terms=document.getElementById('termsCheck').checked; const alertEl=document.getElementById('registerAlert'); if(!name||!email||!p1||!p2){ alertEl.textContent='Completa los campos obligatorios'; alertEl.classList.remove('d-none'); return; } if(p1!==p2){ alertEl.textContent='Las contraseñas no coinciden'; alertEl.classList.remove('d-none'); return; } if(!terms){ alertEl.textContent='Debes aceptar los términos'; alertEl.classList.remove('d-none'); return; } const users=getUsers(); if(users.find(u=>u.email===email)){ alertEl.textContent='Ya existe una cuenta con ese correo'; alertEl.classList.remove('d-none'); return; } const newUser={ name, phone, email, password:p1, address, city, postal, country, createdAt:Date.now() }; users.push(newUser); saveUsers(users); setCurrentUser({ name, email, phone, address }); // auto-login and redirect
    const redirect = localStorage.getItem('postLoginRedirect') || 'catalogo-bootstrap-updated.html'; window.location.href = redirect; });

    // profile modal content
    function showProfile(){ const user=getCurrentUser(); const container=document.getElementById('profileContent'); container.innerHTML=''; if(!user){ container.innerHTML='<p class="text-muted">No hay sesión activa.</p>'; return; } container.innerHTML = `
    <div><strong>${user.name}</strong></div>
    <div class="small text-muted">${user.email}</div>
    <div class="mt-2">${user.phone||''}</div>
    <div class="mt-1 small text-muted">${user.address||''}</div>
    `; document.getElementById('logoutBtn').onclick = ()=>{ setCurrentUser(null); const pm = bootstrap.Modal.getInstance(document.getElementById('profileModal')); pm.hide(); window.location.reload(); };
    }

    // storage event sync between tabs
    window.addEventListener('storage', (e)=>{ if(e.key==='user'){ updateHeaderUI(); } });

    </script>
    </body>
    </html>
